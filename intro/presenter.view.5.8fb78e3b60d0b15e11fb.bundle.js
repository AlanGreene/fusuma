(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{375:function(e,n,t){"use strict";function r(e,n,t,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void t(e)}u.done?n(c):Promise.resolve(c).then(r,o)}function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,"a",function(){return a});var a=function(){function e(){var n=this;if(function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"setupRecording",function(){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(n.handlerRecording)}),i(this,"handlerRecording",function(e){var t=[];n.stream=e,n.mediaRecorder=new MediaRecorder(e,{}),n.mediaRecorder.addEventListener("dataavailable",function(e){e.data.size>0&&t.push(e.data)}),n.mediaRecorder.addEventListener("stop",function(){n.finishedProcess=!0,n.url=URL.createObjectURL(new Blob(t,{type:"audio/webm"}))})}),i(this,"startRecording",function(){n.mediaRecorder.start(),n.finishedProcess=!1,n.url=null}),i(this,"stopRecording",function(){return new Promise(function(e){n.mediaRecorder.stop();var t=setInterval(function(){n.finishedProcess&&(clearInterval(t),e(n.url))},100)})}),i(this,"disposeRecording",function(){n.mediaRecorder.stream.getTracks().forEach(function(e){return e.stop()}),n.finishedProcess=!1,n.url=null}),!navigator.mediaDevices.getUserMedia)throw new Error("Not supported");this.url=null,this.finishedProcess=!1}var n,t,a;return n=e,(t=[{key:"startCapturing",value:function(){var e,n=(e=regeneratorRuntime.mark(function e(n){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,navigator.mediaDevices.getDisplayMedia(n);case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}},e,null,[[1,7]])}),function(){var n=this,t=arguments;return new Promise(function(o,i){var a=e.apply(n,t);function u(e){r(a,o,i,u,c,"next",e)}function c(e){r(a,o,i,u,c,"throw",e)}u(void 0)})});return function(e){return n.apply(this,arguments)}}()},{key:"stopCapturing",value:function(e){e.srcObject.getTracks().forEach(function(e){return e.stop()}),e.srcObject=null}}])&&o(n.prototype,t),a&&o(n,a),e}()},402:function(e,n,t){var r=t(403);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};t(51)(r,o);r.locals&&(e.exports=r.locals)},403:function(e,n,t){},425:function(e,n,t){"use strict";t.r(n);var r=t(2),o=t.n(r),i=t(138);function a(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiType=navigator.presentation&&navigator.presentation.receiver?"presentation":"localStorage","presentation"===this.apiType&&this.setUp()}var n,t,r;return n=e,(t=[{key:"registerEvent",value:function(e,n){navigator.presentation.receiver.connectionList.then(function(t){t.connections.forEach(function(t){t.addEventListener(e,n)}),t.addEventListener("connectionavailable",function(e){n(e.connection)})})}},{key:"setUp",value:function(){this.registerEvent("close",function(e){console.log(e)})}},{key:"onChangePage",value:function(e){"presentation"===this.apiType?this.registerEvent("message",function(n){var t=JSON.parse(n.data).page;e(t)}):window.addEventListener("storage",function(n){if("page"===n.key){var t=JSON.parse(n.newValue).page;e(t)}})}}])&&a(n.prototype,t),r&&a(n,r),e}(),c=t(375);t(402);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e,n,t,r,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void t(e)}u.done?n(c):Promise.resolve(c).then(r,o)}function p(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var i=e.apply(n,t);function a(e){f(i,r,o,a,u,"next",e)}function u(e){f(i,r,o,a,u,"throw",e)}a(void 0)})}}function d(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,n){return(y=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function g(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,"default",function(){return b});var b=function(e){function n(){var e,t,r;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),t=this,r=v(n).call(this),e=!r||"object"!==s(r)&&"function"!=typeof r?h(t):r,g(h(e),"startCapturing",p(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.webrtc){n.next=7;break}return e.webrtc=new c.a,n.next=4,e.webrtc.startCapturing({video:{displaySurface:"monitor"}});case 4:return n.abrupt("return",n.sent);case 7:throw new Error("Capturing has already run.");case 8:case"end":return n.stop()}},n)}))),g(h(e),"stopCapturing",function(n){e.webrtc&&n&&(n.pause(),e.webrtc.stopCapturing(n),e.currentLayer.style.opacity=1,e.webrtc=null,e.currentLayer=null,e.currentVideoTag=null)}),e.webrtc=null,e.currentVideoTag=null,e.currentLayer=null,e.presentationReceiver=new u,e.presentationReceiver.onChangePage(function(n){window.slide&&(window.slide.goToSlide(n),e.webrtc&&e.currentVideoTag&&e.stopCapturing(e.currentVideoTag))}),e}var t,r,a;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&y(e,n)}(n,o.a.PureComponent),t=n,(r=[{key:"componentDidMount",value:function(){this.listenVideoTags()}},{key:"listenVideoTags",value:function(){var e=p(regeneratorRuntime.mark(function e(n){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=document.querySelectorAll("#webslides .fusuma-screen"))){e.next=3;break}return e.abrupt("return");case 3:t.forEach(function(e){var n=l(e.children,2),t=n[0],o=n[1];o.addEventListener("click",p(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.webrtc){e.next=10;break}return e.next=3,r.startCapturing();case 3:n=e.sent,o.srcObject=n,o.play(),r.currentVideoTag=o,r.currentLayer=t,r.currentLayer.style.opacity=0,n.getVideoTracks()[0].onended=function(){r.stopCapturing(o)};case 10:case"end":return e.stop()}},e)})))});case 4:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement(i.a,{slides:this.props.slides,hash:this.props.hash})}}])&&d(t.prototype,r),a&&d(t,a),n}()}}]);